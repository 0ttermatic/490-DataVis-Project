<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Champion Data</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <h1>Champion Data</h1>

    <div id="champion-counts"></div>

    <script src="functions.js"></script>

    <script>
        const jsonPath = '../Data_Gathering/match_data_FINAL.json'

        async function displayChampionCounts() {
    const data = await JsonToVariable(jsonPath);  // Load the data
    if (data) {
        const championCountsArray = CreateChampionMap(data);  // Process the data

        // Convert the array into an object
        const championCounts = Object.fromEntries(championCountsArray);

        const ProperList = SortChampsToRoles(championCounts);  // Get the sorted champions by role
        
        const championCountsElement = document.getElementById('champion-counts');
        championCountsElement.innerHTML = "<h2>Champion Count</h2>";  // Set a heading for the list

        // Iterate over the roles in ProperList
        for (const role in ProperList) {
            // Create a heading for each role
            const roleHeading = document.createElement('h3');
            roleHeading.textContent = role;  // Set the role name (e.g., "Enchanters", "Catchers", etc.)
            championCountsElement.appendChild(roleHeading);

            // Create a list for champions within this role
            const roleList = document.createElement('ul');

            // Display each champion and their count within this role
            ProperList[role].forEach(champion => {
                const listItem = document.createElement('li');
                listItem.textContent = `${champion.champion}: ${champion.count}`;  // Show champion name and count
                roleList.appendChild(listItem);
            });

            // Append the list of champions for this role to the container
            championCountsElement.appendChild(roleList);
        }
    }
}

// Load and display the data once the page is ready
displayChampionCounts();
    </script>
</body>
</html>